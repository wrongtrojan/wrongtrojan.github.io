+++
title = "网页搭建流程梳理"
weight=15
date = 2025-12-09
draft = false
tags=["网页","Hugo","Git","GitHub"]
+++
<!--more-->

### 安装hugo
- 推荐使用scoop安装
```powershell
    # 安装scoop
    Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
    irm get.scoop.sh | iex
```
- 安装hugo并检测
```powershell
    scoop install hugo-extended
    hugo version
```
<br>

### 安装并配置Git
- 推荐使用scoop安装
- 安装Git并检测
```powershell
    scoop install git
    git --version
```
- 配置Git
  - 设置用户信息
  ```powershell
    git config --global user.name "你的用户名"
    git config --global user.email "你的邮箱@example.com"
  ```
  - 验证配置
  ```powershell
    git config --list
  ```
<br>

### 创建站点

```powershell
   hugo new site website
```
<br>

### 下载主题

   **采取Git子模块安装**
   1. 在项目中初始化git仓库
   2. 从远程仓库添加Blowfish为子模块
   ```powershell
       git init
       git submodule add -b main https://github.com/nunocoracao/blowfish.git themes/blowfish
   ```
<br>

### config

- 将根目录`themes\blowfish\config\_default`下的六个文件复制到根目录`config`下
- 若有图片资源用于页面需存放在根目录`assets`下

#### 主题

- hugo子模块安装无需选定
- git子模块则需在`hugo.toml`设置`theme`为`blowfish`

#### 语言

- `hugo.toml`
  - 设置`languageCode`参数为`zh-cn`
- `language.en.toml`
  - 文件名改为`language.zh-cn.toml`
  - 设置`languageCode`参数为`zh-cn`
  - 设置`languageName`参数为`中文`
  - `[params]displayName`参数设为`中文`
  - `[params]isoCode`参数设置为`zh-cn`
- `menus.en.toml`
  - 文件名改为`menus.zh-cn.toml`

#### 时间格式

- 在`language.zh-cn.toml`设置`dateFormat`为`xxxx年xx月xx日`
  
#### 作者信息

- `language.zh-cn.toml` `[params.author]`
    - 设置参数`name`显示作者名
    - 设置参数`image`显示作者头像
    - 设置参数`imageQuality`调整头像质量
    - 设置参数`link`显示作者连接
- 

#### 框架

- `hugo.toml`
  -设置参数`baseURL`为`"https://你的用户名.github.io/"`方便后续GitHub部署   
- `language.zh-cn.toml`
  - 设置参数`title`显示左上角页面标题
  - 设置参数`logo`显示左上角图标
  - 设置参数`copyright`显示左下角页面标志
- `params.toml`
  - 设置参数`colorScheme`调整色彩主题
  - 设置参数`defaultBackgroundImage`设置默认背景

#### 菜单

- 均在`menus.zh-cn.toml`配置
- `[[main]]`设置页面顶部菜单
  - 设置参数`name`显示菜单名
  - 设置参数`parent`指定上级菜单(设置为上级菜单`name`)
  - 设置参数`pageRef`指定内容
    *该参数需指定 `content`的相对路径且最好在对应文件夹中创建对应`_index.md`文件(详情见content)*
  - 设置参数`weight`调整权重设置先后顺序(一般按weight升序)
  - 设置参数`pre`显示blowfish内置图标
  - 设置参数`url`指定链接
- `[[subnavigation]]`设置次级导航(第二行菜单),参数与`[[main]]`相同  
- `[[footer]]`设置页面尾部菜单,参数与`[[main]]`相同

#### 主页

- `params.toml` `[homepage]`
  - 设置参数`layout`指定布局方式
  - 设置参数`homepageImage`显示主页背景
  - 设置参数`showRecent`显示最近文章
  - 设置参数`showRecentItems`指定最近文章数目
  - 设置参数`showMoreLink`显示最近文章末尾`更多`
  - 设置参数`showMoreLink`指定`更多`内容
  - 设置参数`cardView`显示文章卡片
  - 设置参数 `layoutBackgroundBlur`指定背景模糊(当layout设置为background时)
  
#### 文章页

- `params.toml` `[article]`
  - 设置参数`showDate`显示文章时间
  - 设置参数`showAuthor`显示文章作者
  - 设置参数`showHero` `herostyle`设置文章缩略图(建议`true` `background`)
  - 设置参数`layoutBackgroundBlur`(同主页相同)
  - 设置参数`layoutBackgroundHeaderSpac`指定文章页头部与正文留白
  - 设置参数`showTaxonomies` `showCategoryOnly`指定显示分类法(前者显示所有分类法,后者只显示类别)

#### 列表页

- 列表页往往在点击菜单后出现
- 均在`params.toml` 配置
- `[list]`
  - 设置参数`showHero` `herostyle`设置文章缩略图(同文章页相同)
  - 设置参数`layoutBackgroundBlur`(同主页相同)
  - 设置参数`layoutBackgroundHeaderSpac`(同文章页相同)
  - 设置参数`showCard` `cardView`显示卡片显示(前者长条状，后者方框状)

#### 分类页

- `hugo.toml` `taxnomies`
  - 设置参数`tag`开启标签分类法
  - 设置参数`category`开启类别分类法
  - 设置参数`author`开启作者分类法
  - 设置参数`series`开启系列分类法
- `params.toml` `[taxonomy]`
  - 设置参数`showTermCount`显示分类下文章数目
  - 设置参数`showHero` `herostyle`设置文章缩略图(同文章页相同)
  - 设置参数`cardView`(同列表页相同)
  
#### 分类详情页

- `params.toml` `[term]`
  - 设置参数`showHero` `herostyle`设置文章缩略图(同文章页相同)
  - 设置参数`cardView`(同列表页相同)

<br>

### content

- content的一般结构为
```
    content
        about.md//"关于"部分markdown文档
        project1
            _index.md//索引markdown文档，方便hugo找到文件夹与文件
            content1
                _index.md
                file1.md
                file2.md
                ...
            content2
                ...
        project2
            ...
```
<br>

- **菜单**中`pageRef`参数一般指定为(以上述content1为例)
```
    pageRef="project1/content1"
```
<br>

- _index.md的一般内容(只需要`Front Matter`)
```
    ---
    title: "give a title"     # 页面标题
    description: "describe the page"    # 页面描述
    ---
```
<br>

- file.md的`Front Matter`一般包括
```
    +++
    title = "give a title"
    weight= num    # 用于排列文章顺序
    date = xxxx-xx-xx    # 注意严格遵照格式
    draft = true or false
    tags=["tag"]
    +++
```

<br>

### 本地测试
- 在网站目录中运行
```powershell
    hugo server -D
```
- 查看网站并实时预览
访问`http://localhost:1313`

<br>

### GitHub建立仓库并部署
- 创建GitHub仓库
  - Repository name: 你的用户名.github.io（必须严格按此格式）
  - 选择 "Public"（GitHub Pages需要公开仓库）

- 在hugo项目根目录创建工作流文件
  - 创建文件夹：`.github/workflows/`
  - 编辑hugo.yaml：
  ```yaml
    name: Deploy Hugo site to Pages

    on:
    push:
        branches: ["main"]  # 如果你的默认分支是 main
    pull_request:
    workflow_dispatch:

    permissions:
    contents: read
    pages: write
    id-token: write

    concurrency:
    group: "pages"
    cancel-in-progress: false

    defaults:
    run:
        shell: bash

    jobs:
    build:
        runs-on: ubuntu-latest
        env:
        HUGO_VERSION: '0.141.0'  # 使用你本地的 Hugo 版本号
        steps:
        - name: Install Hugo CLI
            run: |
            wget -O ${{ runner.temp }}/hugo.deb https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.deb \
            && sudo dpkg -i ${{ runner.temp }}/hugo.deb
        - name: Checkout
            uses: actions/checkout@v4
            with:
            submodules: recursive
            fetch-depth: 0
        - name: Setup Pages
            id: pages
            uses: actions/configure-pages@v5
        - name: Build with Hugo
            run: |
            hugo \
                --minify \
                --baseURL "${{ steps.pages.outputs.base_url }}/"
        - name: Upload artifact
            uses: actions/upload-pages-artifact@v3
            with:
            path: ./public

    deploy:
        environment:
        name: github-pages
        url: ${{ steps.deployment.outputs.page_url }}
        runs-on: ubuntu-latest
        needs: build
        steps:
        - name: Deploy to GitHub Pages
            id: deployment
            uses: actions/deploy-pages@v4

  ```

- 推送代码到GitHub
  - 添加所有文件并提交更改
  ```powershell
    git add .
    git commit -m "一个名字"
  ```
  - 连接到远程仓库
  ```powershell
    git remote add origin https://github.com/你的用户名/你的用户名.github.io.git
  ```
  - 重命名分支并推送
  ```powershell
    git branch -M main
    git push -u origin main
  ```   

<br>

### 启用GitHub Pages
- 在GitHub仓库中
  - 点击仓库的`Settings`->`Pages`
  - 在`Source`部分选择`GitHub Actions`
- 等待部署完成
  - 点击`Actions`查看部署状态
- 访问网站
  - 打开浏览器访问`https://你的用户名.github.io`